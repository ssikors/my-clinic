(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{4482:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var i={},o=e.split(";"),s=(t||{}).decode||r,n=0;n<o.length;n++){var a=o[n],l=a.indexOf("=");if(!(l<0)){var c=a.substring(0,l).trim();if(void 0==i[c]){var d=a.substring(l+1,a.length).trim();'"'===d[0]&&(d=d.slice(1,-1)),i[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,s)}}}return i},t.serialize=function(e,t,r){var s=r||{},n=s.encode||i;if("function"!=typeof n)throw TypeError("option encode is invalid");if(!o.test(e))throw TypeError("argument name is invalid");var a=n(t);if(a&&!o.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=s.maxAge){var c=s.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(s.domain){if(!o.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!o.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,i=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},7713:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>t.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var s=r(4482),n=function(){return"undefined"!=typeof window},a=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},l=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&a(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&a(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&a(e.cookies())},c=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,i=e.value;t[r]=i}),t},d=function(e){void 0===e&&(e="");try{var t=JSON.stringify(e);return/^[\{\[]/.test(t)?t:e}catch(t){return e}};t.getCookies=function(e){if(l(e)){if(null==e?void 0:e.req)return c(e.req.cookies);if(null==e?void 0:e.cookies)return c(e.cookies())}if(e&&(t=e.req),!n())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,s.parse)(t.headers.cookie):{};for(var t,r={},i=document.cookie?document.cookie.split("; "):[],o=0,a=i.length;o<a;o++){var d=i[o].split("="),u=d.slice(1).join("=");r[d[0]]=u}return r},t.getCookie=function(e,r){var i=(0,t.getCookies)(r)[e];if(void 0!==i)return i?i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):i},t.setCookie=function(e,t,r){if(l(r)){var a,c,u,f=r.req,h=r.res,p=r.cookies,m=o(r,["req","res","cookies"]),x=i({name:e,value:t},m);f&&f.cookies.set(x),h&&h.cookies.set(x),p&&p().set(x);return}if(r){var f=r.req,h=r.res,g=o(r,["req","res"]);c=f,u=h,a=g}var y=(0,s.serialize)(e,d(t),i({path:"/"},a));if(n())document.cookie=y;else if(u&&c){var k=u.getHeader("Set-Cookie");if(Array.isArray(k)||(k=k?[String(k)]:[]),u.setHeader("Set-Cookie",k.concat(y)),c&&c.cookies){var v=c.cookies;""===t?delete v[e]:v[e]=d(t)}if(c&&c.headers&&c.headers.cookie){var v=(0,s.parse)(c.headers.cookie);""===t?delete v[e]:v[e]=d(t),c.headers.cookie=Object.entries(v).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",i(i({},r),{maxAge:-1}))},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)}},1845:function(e,t,r){Promise.resolve().then(r.bind(r,284))},284:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var i=r(7437),o=r(6967),s=r(7713),n=r(2265),a=r(1396),l=r.n(a);let c=e=>{let{user:t,getDoctors:r}=e;async function o(){(await fetch("/api/Doctors/".concat(t.id),{method:"DELETE",headers:{Authorization:"bearer "+(0,s.getCookie)("jwttoken")}})).ok&&r()}return(0,i.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,i.jsx)("td",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white hidden md:table-cell",children:t.fullName}),(0,i.jsx)("td",{className:"px-6 py-4",children:t.emailAddress}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)(l(),{className:" text-blue-800 opacity-80 hover:opacity-100",href:{pathname:"doctors/create-schedule",query:{userId:t.id,userName:t.fullName}},children:"Add schedule"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)(l(),{className:" text-blue-800 opacity-80 hover:opacity-100",href:{pathname:"doctors/schedules",query:{userId:t.id,userName:t.fullName}},children:"Schedules"})}),(0,i.jsx)("td",{className:"text-lg font-bold text-red-600 ",children:(0,i.jsx)("button",{onClick:o,className:"hover:scale-125",children:"x"})})]},t.emailAddress)},d=()=>{let[e,t]=(0,n.useState)([]);(0,n.useEffect)(()=>{r()},[]);let r=()=>{fetch("/api/Users/Doctor",{headers:{Authorization:"bearer "+(0,s.getCookie)("jwttoken")}}).then(e=>e.json()).then(e=>{t(e)}).catch(e=>console.log(e))};return(0,i.jsx)("div",{className:"flex flex-col w-[95%] justify-between items-center bg-slate-100 rounded-md min-h-24",children:(0,i.jsxs)("table",{className:"w-full text-sm text-center rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,i.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Name"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Email"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Add schedule"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 hidden md:table-cell",children:"Schedules"}),(0,i.jsx)("th",{scope:"col",className:"px-4 py-3 hidden md:table-cell",children:"delete"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsx)(c,{getDoctors:r,user:e},e.emailAddress))})]})})};function u(){return(0,i.jsxs)(o.Wrapper,{role:"admin",children:[(0,i.jsx)(d,{}),(0,i.jsxs)("div",{className:"flex flex-row w-full items-center justify-around",children:[(0,i.jsx)(l(),{scroll:!1,href:"/admin",className:"my-2",children:"Admin page"}),(0,i.jsx)(l(),{scroll:!1,href:"doctors/register",className:"my-2",children:"Add a doctor"})]})]})}},6967:function(e,t,r){"use strict";r.r(t),r.d(t,{Wrapper:function(){return f}});var i=r(7437),o=r(7713),s=r(1396),n=r.n(s),a=r(2265),l=r(4033);let c=e=>{let{loggedIn:t,setLoggedIn:r}=e,[s,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,f]=(0,a.useState)(""),h=(0,l.useRouter)();return(0,a.useEffect)(()=>{(0,o.hasCookie)("jwttoken")&&r(!0)},[r]),(0,i.jsx)("div",{className:"flex flex-col gap-2 items-center",children:(0,i.jsx)("button",{onClick:()=>{(0,o.deleteCookie)("email"),(0,o.deleteCookie)("jwttoken"),(0,o.deleteCookie)("role"),r(!1),h.push("/log-in")},className:"py-1 flex rounded-md bg-red-600 justify-center text-lg text-white w-32",children:"Log out"})})},d=()=>{let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)("");return(0,a.useLayoutEffect)(()=>{(0,o.hasCookie)("email")&&t(!0),(0,o.hasCookie)("role")&&s((0,o.getCookie)("role"))},[]),(0,i.jsx)("header",{className:"fixed w-full left-0 top-0 h-16 bg-slate-100 px-4 shadow-md",children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center w-full h-full",children:[(0,i.jsxs)("div",{className:"flex flex-row w-[80%] justify-start gap-6 items-center",children:[(0,i.jsx)(n(),{scroll:!1,href:"/",className:" text-gray-500",children:"Welcome to MyClinic!"}),(0,i.jsx)(n(),{scroll:!1,href:"/visits",children:"Appoint a visit"}),(0,i.jsx)(n(),{scroll:!1,href:"/".concat(r,"/visits"),children:"Your visits"}),"admin"==r?(0,i.jsx)(n(),{scroll:!1,href:"/admin",children:"Admin panel"}):""]}),e?(0,i.jsx)(c,{loggedIn:e,setLoggedIn:t}):""]})})},u=e=>{let{children:t,role:r}=e,[s,n]=(0,a.useState)(!0);return((0,a.useLayoutEffect)(()=>{(0,o.hasCookie)("email")||(0,l.redirect)("/log-in"),r&&(0,o.getCookie)("role")!=r&&(0,l.redirect)("/"),n(!1)},[s,n]),s)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{}),(0,i.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:"Loading..."})]}):(0,i.jsx)(i.Fragment,{children:t})},f=e=>{let{children:t,role:r}=e;return(0,i.jsxs)(u,{role:r,children:[(0,i.jsx)(d,{}),(0,i.jsx)("main",{className:"flex w-full min-h-screen flex-col items-center justify-start p-24",children:t})]})}},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[176,971,938,744],function(){return e(e.s=1845)}),_N_E=e.O()}]);