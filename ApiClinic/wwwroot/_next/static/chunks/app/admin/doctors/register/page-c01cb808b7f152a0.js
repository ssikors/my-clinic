(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{4482:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var o={},i=e.split(";"),n=(t||{}).decode||r,s=0;s<i.length;s++){var a=i[s],l=a.indexOf("=");if(!(l<0)){var c=a.substring(0,l).trim();if(void 0==o[c]){var u=a.substring(l+1,a.length).trim();'"'===u[0]&&(u=u.slice(1,-1)),o[c]=function(e,t){try{return t(e)}catch(t){return e}}(u,n)}}}return o},t.serialize=function(e,t,r){var n=r||{},s=n.encode||o;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(n.domain){if(!i.test(n.domain))throw TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,o=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},7713:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var n=r(4482),s=function(){return"undefined"!=typeof window},a=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},l=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&a(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&a(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&a(e.cookies())},c=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,o=e.value;t[r]=o}),t},u=function(e){void 0===e&&(e="");try{var t=JSON.stringify(e);return/^[\{\[]/.test(t)?t:e}catch(t){return e}};t.getCookies=function(e){if(l(e)){if(null==e?void 0:e.req)return c(e.req.cookies);if(null==e?void 0:e.cookies)return c(e.cookies())}if(e&&(t=e.req),!s())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,n.parse)(t.headers.cookie):{};for(var t,r={},o=document.cookie?document.cookie.split("; "):[],i=0,a=o.length;i<a;i++){var u=o[i].split("="),d=u.slice(1).join("=");r[u[0]]=d}return r},t.getCookie=function(e,r){var o=(0,t.getCookies)(r)[e];if(void 0!==o)return o?o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):o},t.setCookie=function(e,t,r){if(l(r)){var a,c,d,f=r.req,p=r.res,h=r.cookies,m=i(r,["req","res","cookies"]),g=o({name:e,value:t},m);f&&f.cookies.set(g),p&&p.cookies.set(g),h&&h().set(g);return}if(r){var f=r.req,p=r.res,v=i(r,["req","res"]);c=f,d=p,a=v}var x=(0,n.serialize)(e,u(t),o({path:"/"},a));if(s())document.cookie=x;else if(d&&c){var k=d.getHeader("Set-Cookie");if(Array.isArray(k)||(k=k?[String(k)]:[]),d.setHeader("Set-Cookie",k.concat(x)),c&&c.cookies){var y=c.cookies;""===t?delete y[e]:y[e]=u(t)}if(c&&c.headers&&c.headers.cookie){var y=(0,n.parse)(c.headers.cookie);""===t?delete y[e]:y[e]=u(t),c.headers.cookie=Object.entries(y).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",o(o({},r),{maxAge:-1}))},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)}},1426:function(e,t,r){Promise.resolve().then(r.bind(r,194))},194:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var o=r(7437),i=r(6967),n=r(7713),s=r(4033),a=r(2265);let l=["Home doctor","Otolaryngologist","Dermatologist","Ophthalmologist","Neurologist","Orthopedist","Pediatrician"];function c(){let e=(0,s.useRouter)(),[t,r]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,f]=(0,a.useState)(""),[p,h]=(0,a.useState)(l[0]),[m,g]=(0,a.useState)("");async function v(t,o){try{let i=await fetch("/api/Auth/registerDoctor",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer "+(0,n.getCookie)("jwttoken")},body:JSON.stringify({emailAddress:t,password:o,role:"doctor",specialization:p,isActivated:"",fullName:d})});if(r(""),u(""),!i.ok)throw Error("".concat(i.status," ").concat(i.statusText));let s=await i.json();console.log(s.emailAddress),e.push("/admin/doctors")}catch(e){console.log(e),g("Invalid email or password.")}}async function x(e){e.preventDefault(),v(t,c)}return(0,o.jsx)(i.Wrapper,{children:(0,o.jsxs)("div",{className:"flex flex-col gap-2 my-4 text-center",children:[(0,o.jsx)("h2",{className:" text-lg font-bold",children:"Register"}),(0,o.jsxs)("form",{onSubmit:x,className:"flex flex-col items-center gap-1 ",children:[(0,o.jsx)("label",{htmlFor:"name",children:"Name"}),(0,o.jsx)("input",{name:"name",type:"string",value:d,onChange:e=>{f(e.currentTarget.value)}}),(0,o.jsx)("label",{htmlFor:"email",children:"Email"}),(0,o.jsx)("input",{name:"email",type:"email",value:t,onChange:e=>{r(e.currentTarget.value)}}),(0,o.jsx)("label",{htmlFor:"specialization",children:"Specialization"}),(0,o.jsx)("select",{name:"specialization",value:p,onChange:e=>{h(e.currentTarget.value)},children:l.map(e=>(0,o.jsx)("option",{value:e,children:e},e))}),(0,o.jsx)("label",{htmlFor:"password",children:"Password"}),(0,o.jsx)("input",{name:"password",type:"password",value:c,onChange:e=>{u(e.currentTarget.value)}}),(0,o.jsx)("button",{type:"submit",className:"border-2",children:"Register Doctor"}),""==m?"":(0,o.jsx)("div",{className:"text-red-600",children:m})]})]})})}},6967:function(e,t,r){"use strict";r.r(t),r.d(t,{Wrapper:function(){return f}});var o=r(7437),i=r(7713),n=r(1396),s=r.n(n),a=r(2265),l=r(4033);let c=e=>{let{loggedIn:t,setLoggedIn:r}=e,[n,s]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,f]=(0,a.useState)(""),p=(0,l.useRouter)();return(0,a.useEffect)(()=>{(0,i.hasCookie)("jwttoken")&&r(!0)},[r]),(0,o.jsx)("div",{className:"flex flex-col gap-2 items-center",children:(0,o.jsx)("button",{onClick:()=>{(0,i.deleteCookie)("email"),(0,i.deleteCookie)("jwttoken"),(0,i.deleteCookie)("role"),r(!1),p.push("/log-in")},className:"py-1 flex rounded-md bg-red-600 justify-center text-lg text-white w-32",children:"Log out"})})},u=()=>{let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)("");return(0,a.useLayoutEffect)(()=>{(0,i.hasCookie)("email")&&t(!0),(0,i.hasCookie)("role")&&n((0,i.getCookie)("role"))},[]),(0,o.jsx)("header",{className:"fixed w-full left-0 top-0 h-16 bg-slate-100 px-4 shadow-md",children:(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center w-full h-full",children:[(0,o.jsxs)("div",{className:"flex flex-row w-[80%] justify-start gap-6 items-center",children:[(0,o.jsx)(s(),{scroll:!1,href:"/",className:" text-gray-500",children:"Welcome to MyClinic!"}),(0,o.jsx)(s(),{scroll:!1,href:"/visits",children:"Appoint a visit"}),(0,o.jsx)(s(),{scroll:!1,href:"/".concat(r,"/visits"),children:"Your visits"}),"admin"==r?(0,o.jsx)(s(),{scroll:!1,href:"/admin",children:"Admin panel"}):""]}),e?(0,o.jsx)(c,{loggedIn:e,setLoggedIn:t}):""]})})},d=e=>{let{children:t,role:r}=e,[n,s]=(0,a.useState)(!0);return((0,a.useLayoutEffect)(()=>{(0,i.hasCookie)("email")||(0,l.redirect)("/log-in"),r&&(0,i.getCookie)("role")!=r&&(0,l.redirect)("/"),s(!1)},[n,s]),n)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{}),(0,o.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:"Loading..."})]}):(0,o.jsx)(o.Fragment,{children:t})},f=e=>{let{children:t,role:r}=e;return(0,o.jsxs)(d,{role:r,children:[(0,o.jsx)(u,{}),(0,o.jsx)("main",{className:"flex w-full min-h-screen flex-col items-center justify-start p-24",children:t})]})}},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[176,971,938,744],function(){return e(e.s=1426)}),_N_E=e.O()}]);